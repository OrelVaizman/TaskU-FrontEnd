{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/notifications-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/notifications-modal.vue","mtime":1607175842070},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBub3RpZnNGaWx0ZXJzIGZyb20gJy4vbm90aWZzLWZpbHRlcnMnOwppbXBvcnQgbm90aWZQcmV2aWV3IGZyb20gJy4vbm90aWYtcHJldmlldyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBub3RpZnNGaWx0ZXJzOiBub3RpZnNGaWx0ZXJzLAogICAgbm90aWZQcmV2aWV3OiBub3RpZlByZXZpZXcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0ZXJCeTogbnVsbCwKICAgICAgbm90aWZzQ29weTogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBib2FyZDogZnVuY3Rpb24gYm9hcmQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmJvYXJkOwogICAgfSwKICAgIG5vdGlmc1RvU2hvdzogZnVuY3Rpb24gbm90aWZzVG9TaG93KCkgewogICAgICB2YXIgbm90aWZzID0gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyLm5vdGlmaWNhdGlvbnM7CgogICAgICBzd2l0Y2ggKHRoaXMuZmlsdGVyQnkpIHsKICAgICAgICBjYXNlICd1bnJlYWQnOgogICAgICAgICAgbm90aWZzID0gbm90aWZzLmZpbHRlcihmdW5jdGlvbiAobm90aWYpIHsKICAgICAgICAgICAgcmV0dXJuIG5vdGlmLmlzUmVhZCA9PT0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdhc3NpZ25lZCc6CiAgICAgICAgICBub3RpZnMgPSBub3RpZnMuZmlsdGVyKGZ1bmN0aW9uIChub3RpZikgewogICAgICAgICAgICByZXR1cm4gbm90aWYudHlwZSA9PT0gJ2Fzc2lnbmVkJzsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ21lbnRpb25zJzoKICAgICAgICAgIG5vdGlmcyA9IFtdOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHJldHVybiBub3RpZnM7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZU5vdGlmOiBmdW5jdGlvbiB1cGRhdGVOb3RpZihub3RpZikgewogICAgICB2YXIgaWR4ID0gdGhpcy5ub3RpZnNDb3B5LmZpbmRJbmRleChmdW5jdGlvbiAoY3Vyck5vdGlmKSB7CiAgICAgICAgcmV0dXJuIGN1cnJOb3RpZi5pZCA9PT0gbm90aWYuaWQ7CiAgICAgIH0pOwogICAgICB0aGlzLm5vdGlmc0NvcHkuc3BsaWNlKGlkeCwgMSwgbm90aWYpOwogICAgfSwKICAgIGRlbGV0ZU5vdGlmOiBmdW5jdGlvbiBkZWxldGVOb3RpZihub3RpZikgewogICAgICB2YXIgaWR4ID0gdGhpcy5ub3RpZnNDb3B5LmZpbmRJbmRleChmdW5jdGlvbiAoY3Vyck5vdGlmKSB7CiAgICAgICAgcmV0dXJuIGN1cnJOb3RpZi5pZCA9PT0gbm90aWYuaWQ7CiAgICAgIH0pOwogICAgICB0aGlzLm5vdGlmc0NvcHkuc3BsaWNlKGlkeCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTm90aWZzKCk7CiAgICB9LAogICAgc2V0RmlsdGVyOiBmdW5jdGlvbiBzZXRGaWx0ZXIoZmlsdGVyU3RyKSB7CiAgICAgIHRoaXMuZmlsdGVyQnkgPSBmaWx0ZXJTdHI7CiAgICAgIHRoaXMudXBkYXRlTm90aWZzKCk7CiAgICB9LAogICAgdXBkYXRlTm90aWZzOiBmdW5jdGlvbiB1cGRhdGVOb3RpZnMoKSB7CiAgICAgIHRoaXMudXNlci5ub3RpZmljYXRpb25zID0gdGhpcy5ub3RpZnNDb3B5OwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgdHlwZTogJ3VwZGF0ZVVzZXInLAogICAgICAgIHVzZXI6IHRoaXMudXNlcgogICAgICB9KTsKICAgIH0KICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgdGhpcy51cGRhdGVOb3RpZnMoKTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm5vdGlmc0NvcHkgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXIubm90aWZpY2F0aW9uczsKICB9Cn07"},{"version":3,"sources":["notifications-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,aAAA,MAAA,kBAAA;AACA,OAAA,YAAA,MAAA,iBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA,aADA;AAEA,IAAA,YAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,UAAA,EAAA;AAFA,KAAA;AAIA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,KAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,UAAA,MAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,aAAA;;AACA,cAAA,KAAA,QAAA;AACA,aAAA,QAAA;AACA,UAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,UAAA,KAAA;AAAA,mBAAA,KAAA,CAAA,MAAA,KAAA,KAAA;AAAA,WAAA,CAAA;AACA;;AACA,aAAA,UAAA;AACA,UAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA,UAAA,KAAA;AAAA,mBAAA,KAAA,CAAA,IAAA,KAAA,UAAA;AAAA,WAAA,CAAA;AACA;;AACA,aAAA,UAAA;AACA,UAAA,MAAA,GAAA,EAAA;AACA;AATA;;AAWA,aAAA,MAAA;AACA,KAlBA;AAmBA,IAAA,IAnBA,kBAmBA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA;AACA;AArBA,GAXA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AACA,UAAA,GAAA,GAAA,KAAA,UAAA,CAAA,SAAA,CACA,UAAA,SAAA;AAAA,eAAA,SAAA,CAAA,EAAA,KAAA,KAAA,CAAA,EAAA;AAAA,OADA,CAAA;AAGA,WAAA,UAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA,EAAA,KAAA;AACA,KANA;AAOA,IAAA,WAPA,uBAOA,KAPA,EAOA;AACA,UAAA,GAAA,GAAA,KAAA,UAAA,CAAA,SAAA,CACA,UAAA,SAAA;AAAA,eAAA,SAAA,CAAA,EAAA,KAAA,KAAA,CAAA,EAAA;AAAA,OADA,CAAA;AAGA,WAAA,UAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA;AACA,WAAA,YAAA;AACA,KAbA;AAcA,IAAA,SAdA,qBAcA,SAdA,EAcA;AACA,WAAA,QAAA,GAAA,SAAA;AACA,WAAA,YAAA;AACA,KAjBA;AAkBA,IAAA,YAlBA,0BAkBA;AACA,WAAA,IAAA,CAAA,aAAA,GAAA,KAAA,UAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA;AACA,QAAA,IAAA,EAAA,YADA;AAEA,QAAA,IAAA,EAAA,KAAA;AAFA,OAAA;AAIA;AAxBA,GAlCA;AA4DA,EAAA,SA5DA,uBA4DA;AACA,SAAA,YAAA;AACA,GA9DA;AA+DA,EAAA,OA/DA,qBA+DA;AACA,SAAA,UAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,aAAA;AACA;AAjEA,CAAA","sourcesContent":["<template>\n  <section class=\"notifications-modal\">\n    <header class=\"header-notifs\">\n      <h3 class=\"notifs-title\">Notifications</h3>\n      <notifs-filters :setFilter=\"setFilter\"></notifs-filters>\n    </header>\n    <ul v-if=\"notifsToShow.length\" class=\"notifs-list flex column\">\n      <notif-preview\n        v-for=\"(notif, idx) in notifsToShow\"\n        :key=\"idx\"\n        :notif=\"notif\"\n        :user=\"user\"\n        :board=\"board\"\n        @updateNotif=\"updateNotif\"\n        @deleteNotif=\"deleteNotif\"\n      />\n    </ul>\n  </section>\n</template>\n\n\n<script>\nimport notifsFilters from './notifs-filters'\nimport notifPreview from './notif-preview'\n\nexport default {\n  components: {\n    notifsFilters,\n    notifPreview\n  },\n  data() {\n    return {\n      filterBy: null,\n      notifsCopy: null\n    }\n  },\n  computed: {\n    board() {\n      return this.$store.getters.board\n    },\n    notifsToShow() {\n      let notifs = this.$store.getters.user.notifications\n      switch (this.filterBy) {\n        case 'unread':\n          notifs = notifs.filter(notif => notif.isRead === false)\n          break\n        case 'assigned':\n          notifs = notifs.filter(notif => notif.type === 'assigned')\n          break\n        case 'mentions':\n          notifs = []\n          break\n      }\n      return notifs\n    },\n    user() {\n      return this.$store.getters.user\n    }\n  },\n  methods: {\n    updateNotif(notif) {\n      const idx = this.notifsCopy.findIndex(\n        currNotif => currNotif.id === notif.id\n      )\n      this.notifsCopy.splice(idx, 1, notif)\n    },\n    deleteNotif(notif) {\n      const idx = this.notifsCopy.findIndex(\n        currNotif => currNotif.id === notif.id\n      )\n      this.notifsCopy.splice(idx, 1)\n      this.updateNotifs()\n    },\n    setFilter(filterStr) {\n      this.filterBy = filterStr\n      this.updateNotifs()\n    },\n    updateNotifs() {\n      this.user.notifications = this.notifsCopy\n      this.$store.dispatch({\n        type: 'updateUser',\n        user: this.user\n      })\n    }\n  },\n  destroyed() {\n    this.updateNotifs()\n  },\n  created() {\n    this.notifsCopy = this.$store.getters.user.notifications\n  }\n}\n</script>\n\n<style></style>\n"],"sourceRoot":"src/cmps"}]}