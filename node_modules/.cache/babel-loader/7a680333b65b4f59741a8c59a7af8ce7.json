{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/board-chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/board-chat.vue","mtime":1609778254045},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIEV2ZXJ5IGxpbmUgd2l0aCBAQCBuZWVkIHRvIGJlIHdpdGhvdXQgYSBjb21tZW50CmltcG9ydCB7IHNvY2tldFNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL3NvY2tldC5zZXJ2aWNlLmpzJzsKaW1wb3J0IEF2YXRhciBmcm9tICdAL2NtcHMvdXNlci1hdmF0YXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdib2FyZC1jaGF0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbXNnczogW10sCiAgICAgIG1zZzogewogICAgICAgIGZyb206IG51bGwsCiAgICAgICAgdHh0OiAnJwogICAgICB9LAogICAgICAvLyBjaGFuZ2UgdG8gbG9naW4gdXNlcgogICAgICB0b3BpYzogbnVsbCwKICAgICAgaXNUeXBlaW5nOiBmYWxzZSwKICAgICAgbXNnVHlwaW5nOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0b3BpY05hbWU6IGZ1bmN0aW9uIHRvcGljTmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuYm9hcmQubmFtZTsKICAgIH0sCiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZW1pdENsb3NlOiBmdW5jdGlvbiBlbWl0Q2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlQ2hhdCcpOwogICAgfSwKICAgIHVzZXJUeXBpbmc6IGZ1bmN0aW9uIHVzZXJUeXBpbmcoKSB7CiAgICAgIHZhciB0aW1lciA9IG51bGw7CiAgICAgIHNvY2tldFNlcnZpY2UuZW1pdCgndHlwaW5nJywgdGhpcy5tc2cuZnJvbSk7CiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KCdyZXNldCBpcyB0eXBpbmcnKTsKICAgICAgfSwgMjUwMCk7CiAgICB9LAogICAgYWRkTXNnOiBmdW5jdGlvbiBhZGRNc2cobXNnKSB7CiAgICAgIHRoaXMubXNncy5wdXNoKG1zZyk7CiAgICAgIHZhciBlbG1lbnQgPSB0aGlzLiRyZWZzLm1hc3NnZXNDb250YWluZXI7CiAgICAgIGVsbWVudC5zY3JvbGxUb3AgPSBlbG1lbnQuc2Nyb2xsSGVpZ2h0OwogICAgfSwKICAgIHNlbmRNc2c6IGZ1bmN0aW9uIHNlbmRNc2coKSB7CiAgICAgIGlmICghdGhpcy5tc2cudHh0KSByZXR1cm47CiAgICAgIHNvY2tldFNlcnZpY2UuZW1pdCgncmVzZXQgaXMgdHlwaW5nJyk7CiAgICAgIHNvY2tldFNlcnZpY2UuZW1pdCgnY2hhdCBuZXdNc2cnLCB0aGlzLm1zZyk7CiAgICAgIHRoaXMubXNnLnR4dCA9ICcnOwogICAgfSwKICAgIHVwZGF0ZVRvcGljOiBmdW5jdGlvbiB1cGRhdGVUb3BpYygpIHsKICAgICAgdmFyIGJvYXJkSWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuYm9hcmRJZDsKICAgICAgdGhpcy50b3BpYyA9IGJvYXJkSWQ7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLm1zZy5mcm9tID0gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyLmZ1bGxOYW1lOwogICAgdGhpcy51cGRhdGVUb3BpYygpOwogICAgc29ja2V0U2VydmljZS5lbWl0KCdjaGF0IHRvcGljJywgdGhpcy50b3BpYyk7CiAgICBzb2NrZXRTZXJ2aWNlLm9uKCdoaXN0b3J5IG1zZycsIGZ1bmN0aW9uIChtc2dzKSB7CiAgICAgIHJldHVybiBfdGhpcy5tc2dzID0gbXNnczsKICAgIH0pOwogICAgc29ja2V0U2VydmljZS5vbignY2hhdCBhZGRNc2cnLCB0aGlzLmFkZE1zZyk7CiAgICBzb2NrZXRTZXJ2aWNlLm9uKCdjaGF0IGFkZE1zZyBzZW5kZXInLCB0aGlzLmFkZE1zZyk7CiAgICBzb2NrZXRTZXJ2aWNlLm9uKCdpc1R5cGluZycsIGZ1bmN0aW9uIChib29sZW4pIHsKICAgICAgcmV0dXJuIF90aGlzLmlzVHlwZWluZyA9IGJvb2xlbjsKICAgIH0pOwogICAgc29ja2V0U2VydmljZS5vbignbXNnJywgZnVuY3Rpb24gKG1zZykgewogICAgICBfdGhpcy5tc2dUeXBpbmcgPSBtc2c7CiAgICB9KTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgdGhpcy5tc2dzID0gW107CiAgICBzb2NrZXRTZXJ2aWNlLm9mZignY2hhdCBhZGRNc2cnLCB0aGlzLmFkZE1zZyk7IC8vIHNvY2tldFNlcnZpY2UudGVybWluYXRlKCk7CiAgfSwKICB3YXRjaDogewogICAgJyRyb3V0ZS5wYXJhbXMuYm9hcmRJZCc6IGZ1bmN0aW9uICRyb3V0ZVBhcmFtc0JvYXJkSWQoKSB7CiAgICAgIHRoaXMudXBkYXRlVG9waWMoKTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEF2YXRhcjogQXZhdGFyCiAgfQp9Ow=="},{"version":3,"sources":["board-chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <section class=\"board-chat\">\n    <section class=\"chat-container flex column\">\n      <div class=\"header-chat flex column \">\n        <div class=\"main-header flex space-between align-center\">\n          {{ topicName }} Chat\n          <button class=\"btn-close\">\n            <i @click=\"emitClose\" class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        <span v-if=\"isTypeing\">{{ msgTyping }}</span>\n      </div>\n      <div ref=\"massgesContainer\" class=\"msg-container grow flex column\">\n        <template v-if=\"msgs\">\n          <div class=\"chat-msg flex \" v-for=\"(msg, idx) in msgs\" :key=\"idx\">\n            <div\n              class=\"flex align-center\"\n              :class=\"['to-msg', msg.sender || '']\"\n            >\n              <avatar :user=\"user\" />\n\n              <strong class=\"from-msg\"></strong><span>{{ msg.txt }} </span>\n            </div>\n          </div>\n        </template>\n      </div>\n      <div class=\"footer-chat flex align-center\">\n        <input\n          type=\"text\"\n          @keydown.enter=\"sendMsg\"\n          v-model=\"msg.txt\"\n          placeholder=\"Write a message...\"\n          name=\"\"\n          id=\"\"\n        /><i\n          v-tooltip.top=\"'Send Msg'\"\n          @click=\"sendMsg\"\n          class=\"send-btn fas fa-paper-plane\"\n        ></i>\n      </div>\n    </section>\n  </section>\n</template>\n<script>\n// Every line with @@ need to be without a comment\nimport { socketService } from '@/services/socket.service.js'\nimport Avatar from '@/cmps/user-avatar.vue'\n\nexport default {\n  name: 'board-chat',\n  data() {\n    return {\n      msgs: [],\n      msg: { from: null, txt: '' }, // change to login user\n      topic: null,\n      isTypeing: false,\n      msgTyping: ''\n    }\n  },\n  computed: {\n    topicName() {\n      return this.$store.getters.board.name\n    },\n    user() {\n      return this.$store.getters.user\n    }\n  },\n  methods: {\n    emitClose() {\n      this.$emit('closeChat')\n    },\n\n    userTyping() {\n      var timer = null\n      socketService.emit('typing', this.msg.from)\n      clearTimeout(timer)\n      timer = setTimeout(() => {\n        socketService.emit('reset is typing')\n      }, 2500)\n    },\n    addMsg(msg) {\n      this.msgs.push(msg)\n      var elment = this.$refs.massgesContainer\n      elment.scrollTop = elment.scrollHeight\n    },\n    sendMsg() {\n      if (!this.msg.txt) return\n      socketService.emit('reset is typing')\n      socketService.emit('chat newMsg', this.msg)\n      this.msg.txt = ''\n    },\n    updateTopic() {\n      const { boardId } = this.$route.params\n      this.topic = boardId\n    }\n  },\n  created() {\n    this.msg.from = this.$store.getters.user.fullName\n    this.updateTopic()\n    socketService.emit('chat topic', this.topic)\n    socketService.on('history msg', msgs => (this.msgs = msgs))\n    socketService.on('chat addMsg', this.addMsg)\n    socketService.on('chat addMsg sender', this.addMsg)\n    socketService.on('isTyping', boolen => (this.isTypeing = boolen))\n    socketService.on('msg', msg => {\n      this.msgTyping = msg\n    })\n  },\n  destroyed() {\n    this.msgs = []\n    socketService.off('chat addMsg', this.addMsg)\n    // socketService.terminate();\n  },\n  watch: {\n    '$route.params.boardId'() {\n      this.updateTopic()\n    }\n  },\n  components: {\n    Avatar\n  }\n}\n</script>\n"],"sourceRoot":"src/cmps"}]}