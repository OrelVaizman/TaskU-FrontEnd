{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/board-app.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/board-app.vue","mtime":1606477571743},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZW1iZXJzIGZyb20gJ0AvY21wcy9tZW1iZXJzJwppbXBvcnQgZ3JvdXBMaXN0IGZyb20gJ0AvY21wcy9ncm91cC1saXN0JwppbXBvcnQgYm9hcmRMaXN0IGZyb20gJ0AvY21wcy9ib2FyZC1saXN0LnZ1ZScKLy8gaW1wb3J0IHRhc2tEZXRhaWxzIGZyb20gJy4uL3ZpZXdzL3Rhc2stZGV0YWlscycKaW1wb3J0IHsgYm9hcmRTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9ib2FyZC5zZXJ2aWNlJwppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gJ0Avc2VydmljZXMvZXZlbnQtYnVzLnNlcnZpY2UnCgppbXBvcnQgYm9hcmRGaWx0ZXIgZnJvbSAnQC9jbXBzL2JvYXJkLWZpbHRlci52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnYm9hcmQtYXBwJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNBZGRNZW1iZXJzOiBmYWxzZSwKICAgICAgICAgICAgY3VyclRhc2tEZXRhaWxzOiBudWxsLAogICAgICAgICAgICBpc1JvdXRlclZpZXdIb3ZlcjogZmFsc2UsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgYm9hcmQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmJvYXJkCiAgICAgICAgfSwKICAgICAgICBib2FyZHMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmJvYXJkcwogICAgICAgIH0sCiAgICAgICAgdXNlcnNTaXRlKCkgewogICAgICAgICAgICBjb25zdCBzaXRlVXNlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXJzCiAgICAgICAgICAgIGNvbnN0IGJvYXJkTWVtYmVycyA9IHRoaXMuYm9hcmQubWVtYmVycwogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFNpdGVVc2VycyA9IHNpdGVVc2Vycy5maWx0ZXIoKHNpdGVVc2VyKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gYm9hcmRNZW1iZXJzLmV2ZXJ5KChib2FyZE1lbWJlcikgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiBib2FyZE1lbWJlci5faWQgIT09IHNpdGVVc2VyLl9pZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbHRlcmVkU2l0ZVVzZXJzOicsIGZpbHRlcmVkU2l0ZVVzZXJzKQogICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRTaXRlVXNlcnMKICAgICAgICB9LAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhZGRVc2VyVG9Cb2FyZCh1c2VyKSB7CiAgICAgICAgICAgIHRoaXMuYm9hcmQubWVtYmVycy51bnNoaWZ0KHVzZXIpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ3NhdmVCb2FyZCcsIGJvYXJkOiB0aGlzLmJvYXJkIH0pCiAgICAgICAgfSwKICAgICAgICByZW1vdmVVc2VyRnJvbUJvYXJkKHVzZXJJZCkgewogICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLmJvYXJkLm1lbWJlcnMuZmluZEluZGV4KAogICAgICAgICAgICAgICAgKGJNZW1iZXIpID0+IGJNZW1iZXIuX2lkID09PSB1c2VySWQKICAgICAgICAgICAgKQogICAgICAgICAgICB0aGlzLmJvYXJkLm1lbWJlcnMuc3BsaWNlKGlkeCwgMSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnc2F2ZUJvYXJkJywgYm9hcmQ6IHRoaXMuYm9hcmQgfSkKICAgICAgICB9LAogICAgICAgIHNldFNlYXJjaChzZWFyY2hCb2FyZCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoeyB0eXBlOiAnc2V0U2VhcmNoJywgc2VhcmNoQm9hcmQgfSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnbG9hZEJvYXJkcycgfSkKICAgICAgICB9LAoKICAgICAgICByZW1vdmVDdXJyQm9hcmQoYm9hcmRJZCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdyZW1vdmVCb2FyZCcsIGJvYXJkSWQgfSkKICAgICAgICB9LAogICAgICAgIGFkZEJvYXJkKCkgewogICAgICAgICAgICBjb25zdCBib2FyZCA9IGJvYXJkU2VydmljZS5nZXRFbXB0eUJvYXJkKCkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAnc2F2ZUJvYXJkJywgYm9hcmQgfSkKICAgICAgICB9LAoKICAgICAgICBsb2FkQm9hcmQoKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdsb2FkQm9hcmQnLAogICAgICAgICAgICAgICAgYm9hcmRJZDogdGhpcy4kcm91dGUucGFyYW1zLmJvYXJkSWQsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhZGRHcm91cCgpIHsKICAgICAgICAgICAgY29uc3QgbmV3R3JvdXAgPSBib2FyZFNlcnZpY2UuZ2V0RW1wdHlHcm91cCgpCiAgICAgICAgICAgIHRoaXMuYm9hcmQuZ3JvdXBzLnB1c2gobmV3R3JvdXApCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzYXZlQm9hcmQnLAogICAgICAgICAgICAgICAgYm9hcmQ6IHRoaXMuYm9hcmQsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBkZWxldGVHcm91cChncm91cElkKSB7CiAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuYm9hcmQuZ3JvdXBzLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgIChncm91cCkgPT4gZ3JvdXAuaWQgPT09IGdyb3VwSWQKICAgICAgICAgICAgKQogICAgICAgICAgICB0aGlzLmJvYXJkLmdyb3Vwcy5zcGxpY2UoaWR4LCAxKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZUJvYXJkJywKICAgICAgICAgICAgICAgIGJvYXJkOiB0aGlzLmJvYXJkLAogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2V0Q3VyclRhc2tEZXRhaWxzKGN1cnJUYXNrRGV0YWlscykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyVGFza0RldGFpbHMsICdTZXR0aW5nIGN1cnJUYXNrRGV0YWlscycpCiAgICAgICAgICAgIHRoaXMuY3VyclRhc2tEZXRhaWxzID0gY3VyclRhc2tEZXRhaWxzCiAgICAgICAgfSwKICAgICAgICAvLyBnZXRHcm91cEJ5SWQoZ3JvdXBJZCkgewogICAgICAgIC8vICAgICBjb25zdCBpZHggPSB0aGlzLmJvYXJkLmdyb3Vwcy5maW5kSW5kZXgoCiAgICAgICAgLy8gICAgICAgICAoZ3JvdXApID0+IGdyb3VwLmlkID09PSBncm91cElkCiAgICAgICAgLy8gICAgICkKICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuYm9hcmQuZ3JvdXBzW2lkeF0KICAgICAgICAvLyB9LAogICAgICAgIHVwZGF0ZVRhc2tUeHQodGFza0RldGFpbHMpIHsKICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IHRhc2tEZXRhaWxzLnRhc2sKICAgICAgICAgICAgY29uc3QgZ3JvdXBJZHggPSB0aGlzLmJvYXJkLmdyb3Vwcy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAoZ3JvdXApID0+IGdyb3VwLmlkID09PSB0YXNrRGV0YWlscy5ncm91cElkCiAgICAgICAgICAgICkKICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmJvYXJkLmdyb3Vwc1tncm91cElkeF0KICAgICAgICAgICAgY29uc3QgdGFza0lkeCA9IGdyb3VwLnRhc2tzLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh0YXNrKSA9PiB0YXNrLmlkID09PSBuZXdUYXNrLmlkCiAgICAgICAgICAgICkKICAgICAgICAgICAgZ3JvdXAudGFza3Muc3BsaWNlKHRhc2tJZHgsIDEsIG5ld1Rhc2spCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzYXZlQm9hcmQnLAogICAgICAgICAgICAgICAgYm9hcmQ6IHRoaXMuYm9hcmQsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgICckcm91dGUucGFyYW1zLmJvYXJkSWQnKHZhbCkgewogICAgICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRCb2FyZCgpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgZXZlbnRCdXMuJG9uKCd0YXNrRGV0YWlscycsIHRoaXMuc2V0Q3VyclRhc2tEZXRhaWxzKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ2xvYWRVc2VycycgfSkKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdsb2FkQm9hcmRzJyB9KQogICAgICAgIHRoaXMubG9hZEJvYXJkKCkKICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgZ3JvdXBMaXN0LAogICAgICAgIGJvYXJkTGlzdCwKICAgICAgICBib2FyZEZpbHRlciwKICAgICAgICBtZW1iZXJzLAogICAgICAgIC8vIHRhc2tEZXRhaWxzCiAgICB9LAp9Cg=="},{"version":3,"sources":["board-app.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"board-app.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <section class=\"board-app flex\">\n        <board-list\n            @searchBoard=\"setSearch\"\n            @removeBoard=\"removeCurrBoard\"\n            @addNewBoard=\"addBoard\"\n            :boards=\"boards\"\n        />\n        <div class=\"board-app-container width100\">\n            <div v-if=\"board\" class=\"board-control\">\n                <h2>{{ board.name }}</h2>\n                <board-filter\n                    v-if=\"board.creator\"\n                    :creator=\"board.creator\"\n                    @addGroup=\"addGroup\"\n                />\n                <!-- <button @click=\"addGroup\">New Group</button> -->\n                <div>\n                    <button @click=\"isAddMembers = !isAddMembers\">+</button>\n                    <members v-if=\"isAddMembers\">\n                        <h2 slot=\"title-members\">Members board</h2>\n                        <ul\n                            v-if=\"board.members\"\n                            class=\"clean-list\"\n                            slot=\"members\"\n                        >\n                            <li\n                                v-for=\"member in board.members\"\n                                :key=\"member._id\"\n                            >\n                                {{ member.fullName }} {{ member._id }}\n                                <button\n                                    @click=\"removeUserFromBoard(member._id)\"\n                                >\n                                    -\n                                </button>\n                            </li>\n                        </ul>\n                        <h2 slot=\"title-all-members\">site users</h2>\n                        <ul class=\"clean-list\" slot=\"all-members\">\n                            <li v-for=\"user in usersSite\" :key=\"user._id\">\n                                {{ user.fullName }}{{ user._id }}\n                                <button @click=\"addUserToBoard(user)\">+</button>\n                            </li>\n                        </ul>\n                    </members>\n                </div>\n            </div>\n            <group-list\n                v-if=\"board\"\n                :groups=\"board.groups\"\n                :boardName=\"board.name\"\n                @deleteGroup=\"deleteGroup\"\n            />\n            <div v-if=\"isRouterViewHover\" class=\"backdrop-layer\"></div>\n        </div>\n        <router-view\n            v-if=\"currTaskDetails\"\n            @updateTaskTxt=\"updateTaskTxt\"\n            @close=\"isRouterViewHover = false\"\n            class=\"boardapp-nested\"\n            @mouseover.native=\"isRouterViewHover = true\"\n            @mouseleave.native=\"isRouterViewHover = false\"\n            :task=\"currTaskDetails.task\"\n            :groupId=\"currTaskDetails.groupId\"\n        />\n        <!-- <task-details v-if=\"this.$route.params.taskId\" :task=\"currTask\" /> -->\n    </section>\n</template>\n\n<script>\nimport members from '@/cmps/members'\nimport groupList from '@/cmps/group-list'\nimport boardList from '@/cmps/board-list.vue'\n// import taskDetails from '../views/task-details'\nimport { boardService } from '@/services/board.service'\nimport { eventBus } from '@/services/event-bus.service'\n\nimport boardFilter from '@/cmps/board-filter.vue'\n\nexport default {\n    name: 'board-app',\n    data() {\n        return {\n            isAddMembers: false,\n            currTaskDetails: null,\n            isRouterViewHover: false,\n        }\n    },\n    computed: {\n        board() {\n            return this.$store.getters.board\n        },\n        boards() {\n            return this.$store.getters.boards\n        },\n        usersSite() {\n            const siteUsers = this.$store.getters.users\n            const boardMembers = this.board.members\n            const filteredSiteUsers = siteUsers.filter((siteUser) => {\n                return boardMembers.every((boardMember) => {\n                    return boardMember._id !== siteUser._id\n                })\n            })\n            console.log('filteredSiteUsers:', filteredSiteUsers)\n            return filteredSiteUsers\n        },\n    },\n    methods: {\n        addUserToBoard(user) {\n            this.board.members.unshift(user)\n            this.$store.dispatch({ type: 'saveBoard', board: this.board })\n        },\n        removeUserFromBoard(userId) {\n            const idx = this.board.members.findIndex(\n                (bMember) => bMember._id === userId\n            )\n            this.board.members.splice(idx, 1)\n            this.$store.dispatch({ type: 'saveBoard', board: this.board })\n        },\n        setSearch(searchBoard) {\n            this.$store.commit({ type: 'setSearch', searchBoard })\n            this.$store.dispatch({ type: 'loadBoards' })\n        },\n\n        removeCurrBoard(boardId) {\n            this.$store.dispatch({ type: 'removeBoard', boardId })\n        },\n        addBoard() {\n            const board = boardService.getEmptyBoard()\n            this.$store.dispatch({ type: 'saveBoard', board })\n        },\n\n        loadBoard() {\n            this.$store.dispatch({\n                type: 'loadBoard',\n                boardId: this.$route.params.boardId,\n            })\n        },\n        addGroup() {\n            const newGroup = boardService.getEmptyGroup()\n            this.board.groups.push(newGroup)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n        },\n        deleteGroup(groupId) {\n            const idx = this.board.groups.findIndex(\n                (group) => group.id === groupId\n            )\n            this.board.groups.splice(idx, 1)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n        },\n        setCurrTaskDetails(currTaskDetails) {\n            console.log(currTaskDetails, 'Setting currTaskDetails')\n            this.currTaskDetails = currTaskDetails\n        },\n        // getGroupById(groupId) {\n        //     const idx = this.board.groups.findIndex(\n        //         (group) => group.id === groupId\n        //     )\n        //     return this.board.groups[idx]\n        // },\n        updateTaskTxt(taskDetails) {\n            const newTask = taskDetails.task\n            const groupIdx = this.board.groups.findIndex(\n                (group) => group.id === taskDetails.groupId\n            )\n            const group = this.board.groups[groupIdx]\n            const taskIdx = group.tasks.findIndex(\n                (task) => task.id === newTask.id\n            )\n            group.tasks.splice(taskIdx, 1, newTask)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n        },\n    },\n    watch: {\n        '$route.params.boardId'(val) {\n            if (val) {\n                this.loadBoard()\n            }\n        },\n    },\n    created() {\n        eventBus.$on('taskDetails', this.setCurrTaskDetails)\n        this.$store.dispatch({ type: 'loadUsers' })\n        this.$store.dispatch({ type: 'loadBoards' })\n        this.loadBoard()\n    },\n    components: {\n        groupList,\n        boardList,\n        boardFilter,\n        members,\n        // taskDetails\n    },\n}\n</script>\n"]}]}