{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/task-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/task-list.vue","mtime":1607211301840},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YXNrUHJldmlldyBmcm9tICcuL3Rhc2stcHJldmlldycKaW1wb3J0IHsgYm9hcmRTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9ib2FyZC5zZXJ2aWNlJwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScKLy8gaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICdAL3NlcnZpY2VzL2V2ZW50LWJ1cy5zZXJ2aWNlJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ3Rhc2stbGlzdCcsCiAgICBwcm9wczogewogICAgICAgIHRhc2tzOiBBcnJheSwKICAgICAgICBncm91cElkOiBTdHJpbmcsCiAgICAgICAgdGFza0NvbG9yOiBTdHJpbmcsCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eHQ6ICcnLAogICAgICAgICAgICBpc0FkZEJ0blNob3dlbjogZmFsc2UsCiAgICAgICAgICAgIGNsb25lZFRhc2tzOiBudWxsLAogICAgICAgIH0KICAgIH0sCgogICAgY29tcHV0ZWQ6IHsKICAgICAgICBib2FyZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuYm9hcmQKICAgICAgICB9LAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB0eHQ6ICcnLAogICAgICAgICAgICAgICAgaXNBZGRCdG5TaG93ZW46IGZhbHNlLAogICAgICAgICAgICAgICAgY2xvbmVkVGFza3M6IG51bGwsCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRhc2tCZ2MoKSB7CiAgICAgICAgICAgIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogdGhpcy50YXNrQ29sb3IgfQogICAgICAgIH0sCiAgICAgICAgdXNlcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcgogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFkZEVtcHR5VGFzayhncm91cElkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwSWQgIT09IGdyb3VwSWQpIHsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBib2FyZFNlcnZpY2UuZ2V0RW1wdHlUYXNrKCkKICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmdldEdyb3VwQnlJZCgpCiAgICAgICAgICAgIGNvbnN0IHR4dCA9IGAke3RoaXMudXNlci5mdWxsTmFtZX0gYWRkIG5ldyB0YXNrIGluICR7Z3JvdXAudHh0fWAKICAgICAgICAgICAgbGV0IG5ld0FjdGl2aXR5ID0gYm9hcmRTZXJ2aWNlLmdldEVtcHR5QWN0aXZpdHkodHh0LCB0aGlzLnVzZXIpCiAgICAgICAgICAgIG5ld0FjdGl2aXR5Lmdyb3VwSWQgPSBncm91cElkCiAgICAgICAgICAgIHRoaXMuYm9hcmQuYWN0aXZpdGllcy51bnNoaWZ0KG5ld0FjdGl2aXR5KQogICAgICAgICAgICBncm91cC50YXNrcy5wdXNoKG5ld1Rhc2spCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzYXZlQm9hcmQnLAogICAgICAgICAgICAgICAgYm9hcmQ6IHRoaXMuYm9hcmQsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsgdHlwZTogJ3VwZGF0ZUJvYXJkJywgYm9hcmQ6IHRoaXMuYm9hcmQgfSkKCiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTmV3IHRhc2sgYWRkZWQnLAogICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tbGVmdCcsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy4kZW1pdCgnZm9yY2VSZW5kZXInKQogICAgICAgIH0sCiAgICAgICAgc2hvd0FkZEJ0bigpIHsKICAgICAgICAgICAgdGhpcy5pc0FkZEJ0blNob3dlbiA9IHRydWUKICAgICAgICB9LAogICAgICAgIGdldEdyb3VwQnlJZCgpIHsKICAgICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5ib2FyZC5ncm91cHMuZmluZEluZGV4KAogICAgICAgICAgICAgICAgKGdyb3VwKSA9PiBncm91cC5pZCA9PT0gdGhpcy5ncm91cElkCiAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuZ3JvdXBzW2lkeF0KICAgICAgICB9LAogICAgICAgIGFkZFRhc2soKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBib2FyZFNlcnZpY2UuZ2V0RW1wdHlUYXNrKCkKICAgICAgICAgICAgbmV3VGFzay50eHQgPSB0aGlzLnR4dAogICAgICAgICAgICBjb25zdCB0eHQgPSBgVGFzayAnJHtuZXdUYXNrLnR4dH0nIGFkZGVkYAogICAgICAgICAgICBsZXQgbmV3QWN0aXZpdHkgPSBib2FyZFNlcnZpY2UuZ2V0RW1wdHlBY3Rpdml0eSh0eHQsIHRoaXMudXNlcikKICAgICAgICAgICAgbmV3QWN0aXZpdHkuZ3JvdXBJZCA9IHRoaXMuZ3JvdXBJZAogICAgICAgICAgICB0aGlzLmJvYXJkLmFjdGl2aXRpZXMudW5zaGlmdChuZXdBY3Rpdml0eSkKICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmdldEdyb3VwQnlJZCgpCiAgICAgICAgICAgIGdyb3VwLnRhc2tzLnB1c2gobmV3VGFzaykKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goewogICAgICAgICAgICAgICAgdHlwZTogJ3NhdmVCb2FyZCcsCiAgICAgICAgICAgICAgICBib2FyZDogdGhpcy5ib2FyZCwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAndXBkYXRlQm9hcmQnLCBib2FyZDogdGhpcy5ib2FyZCB9KQoKICAgICAgICAgICAgdGhpcy50eHQgPSAnJwogICAgICAgICAgICB0aGlzLmlzQWRkQnRuU2hvd2VuID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdOZXcgdGFzayBhZGRlZCcsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1sZWZ0JywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JjZVJlbmRlcicpCiAgICAgICAgfSwKICAgICAgICBkZWxldGVUYXNrKHRhc2tJZCkgewogICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuZ2V0R3JvdXBCeUlkKCkKICAgICAgICAgICAgY29uc3QgdGFza0lkeCA9IGdyb3VwLnRhc2tzLmZpbmRJbmRleCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGFza0lkKQogICAgICAgICAgICBncm91cC50YXNrcy5zcGxpY2UodGFza0lkeCwgMSkKICAgICAgICAgICAgY29uc3QgdHh0ID0gYCR7dGhpcy51c2VyLmZ1bGxOYW1lfSByZW1vdmUgYSB0YXNrIGZyb20gJHtncm91cC50eHR9YAogICAgICAgICAgICBsZXQgbmV3QWN0aXZpdHkgPSBib2FyZFNlcnZpY2UuZ2V0RW1wdHlBY3Rpdml0eSh0eHQsIHRoaXMudXNlcikKICAgICAgICAgICAgbmV3QWN0aXZpdHkuZ3JvdXBJZCA9IHRoaXMuZ3JvdXBJZAogICAgICAgICAgICB0aGlzLmJvYXJkLmFjdGl2aXRpZXMudW5zaGlmdChuZXdBY3Rpdml0eSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goewogICAgICAgICAgICAgICAgdHlwZTogJ3NhdmVCb2FyZCcsCiAgICAgICAgICAgICAgICBib2FyZDogdGhpcy5ib2FyZCwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiAndXBkYXRlQm9hcmQnLCBib2FyZDogdGhpcy5ib2FyZCB9KQogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Rhc2sgcmVtb3ZlZCcsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1sZWZ0JywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JjZVJlbmRlcicpCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVUYXNrKG5ld1Rhc2ssIGFjdGl2aXR5KSB7CiAgICAgICAgICAgIGlmIChhY3Rpdml0eSkgewogICAgICAgICAgICAgICAgdGhpcy5ib2FyZC5hY3Rpdml0aWVzLnVuc2hpZnQoYWN0aXZpdHkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmdldEdyb3VwQnlJZCgpCiAgICAgICAgICAgIGNvbnN0IHRhc2tJZHggPSBncm91cC50YXNrcy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodGFzaykgPT4gdGFzay5pZCA9PT0gbmV3VGFzay5pZAogICAgICAgICAgICApCiAgICAgICAgICAgIGdyb3VwLnRhc2tzLnNwbGljZSh0YXNrSWR4LCAxLCBuZXdUYXNrKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZUJvYXJkJywKICAgICAgICAgICAgICAgIGJvYXJkOiB0aGlzLmJvYXJkLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICd1cGRhdGVCb2FyZCcsIGJvYXJkOiB0aGlzLmJvYXJkIH0pCgogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JjZVJlbmRlcicpCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVUYXNrcygpIHsKICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmdldEdyb3VwQnlJZCgpCiAgICAgICAgICAgIGdyb3VwLnRhc2tzID0gdGhpcy5jbG9uZWRUYXNrcwogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZUJvYXJkJywKICAgICAgICAgICAgICAgIGJvYXJkOiB0aGlzLmJvYXJkLAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICd1cGRhdGVCb2FyZCcsIGJvYXJkOiB0aGlzLmJvYXJkIH0pCgogICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JjZVJlbmRlcicpCiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuY2xvbmVkVGFza3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3MpKQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICB0YXNrUHJldmlldywKICAgICAgICBkcmFnZ2FibGUsCiAgICB9LAp9Cg=="},{"version":3,"sources":["task-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"task-list.vue","sourceRoot":"src/cmps","sourcesContent":["<template>\n    <section v-if=\"clonedTasks\" class=\"task-list-container width100\">\n        <ul\n            class=\"task-list clean-list flex wrap align-center justify-center gap\"\n        >\n            <draggable\n                class=\"width100\"\n                :list=\"clonedTasks\"\n                group=\"task\"\n                @change=\"updateTasks\"\n            >\n                <task-preview\n                    v-for=\"task in clonedTasks\"\n                    :user=\"user\"\n                    :taskColor=\"taskColor\"\n                    :key=\"task.id\"\n                    :task=\"task\"\n                    :statuses=\"board.statuses\"\n                    :priorities=\"board.priorities\"\n                    :groupId=\"groupId\"\n                    @deleteTask=\"deleteTask\"\n                    @updateTask=\"updateTask\"\n                    :boardMembers=\"board.members\"\n                />\n            </draggable>\n        </ul>\n        <form class=\"add-task-form flex\" @submit.prevent=\"addTask\">\n            <span class=\"task-color input-color\" :style=\"taskBgc\"></span>\n            <input\n                class=\"add-task-input\"\n                @focus=\"showAddBtn\"\n                v-model=\"txt\"\n                type=\"text\"\n                placeholder=\"+ Add Task\"\n            />\n            <button v-show=\"isAddBtnShowen\" type=\"submit\">Add</button>\n        </form>\n    </section>\n</template>\n\n<script>\nimport taskPreview from './task-preview'\nimport { boardService } from '@/services/board.service'\nimport draggable from 'vuedraggable'\n// import { eventBus } from '@/services/event-bus.service'\n\nexport default {\n    name: 'task-list',\n    props: {\n        tasks: Array,\n        groupId: String,\n        taskColor: String,\n    },\n    data() {\n        return {\n            txt: '',\n            isAddBtnShowen: false,\n            clonedTasks: null,\n        }\n    },\n\n    computed: {\n        board() {\n            return this.$store.getters.board\n        },\n        data() {\n            return {\n                txt: '',\n                isAddBtnShowen: false,\n                clonedTasks: null,\n            }\n        },\n        taskBgc() {\n            return { backgroundColor: this.taskColor }\n        },\n        user() {\n            return this.$store.getters.user\n        },\n    },\n    methods: {\n        addEmptyTask(groupId) {\n            if (this.groupId !== groupId) {\n                return\n            }\n            const newTask = boardService.getEmptyTask()\n            const group = this.getGroupById()\n            const txt = `${this.user.fullName} add new task in ${group.txt}`\n            let newActivity = boardService.getEmptyActivity(txt, this.user)\n            newActivity.groupId = groupId\n            this.board.activities.unshift(newActivity)\n            group.tasks.push(newTask)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            this.$store.dispatch({ type: 'updateBoard', board: this.board })\n\n            this.$notify({\n                message: 'New task added',\n                position: 'bottom-left',\n                duration: 2000,\n            })\n            this.$emit('forceRender')\n        },\n        showAddBtn() {\n            this.isAddBtnShowen = true\n        },\n        getGroupById() {\n            const idx = this.board.groups.findIndex(\n                (group) => group.id === this.groupId\n            )\n            return this.board.groups[idx]\n        },\n        addTask() {\n            const newTask = boardService.getEmptyTask()\n            newTask.txt = this.txt\n            const txt = `Task '${newTask.txt}' added`\n            let newActivity = boardService.getEmptyActivity(txt, this.user)\n            newActivity.groupId = this.groupId\n            this.board.activities.unshift(newActivity)\n            const group = this.getGroupById()\n            group.tasks.push(newTask)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            this.$store.dispatch({ type: 'updateBoard', board: this.board })\n\n            this.txt = ''\n            this.isAddBtnShowen = false\n            this.$notify({\n                message: 'New task added',\n                position: 'bottom-left',\n                duration: 2000,\n            })\n            this.$emit('forceRender')\n        },\n        deleteTask(taskId) {\n            const group = this.getGroupById()\n            const taskIdx = group.tasks.findIndex((task) => task.id === taskId)\n            group.tasks.splice(taskIdx, 1)\n            const txt = `${this.user.fullName} remove a task from ${group.txt}`\n            let newActivity = boardService.getEmptyActivity(txt, this.user)\n            newActivity.groupId = this.groupId\n            this.board.activities.unshift(newActivity)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            this.$store.dispatch({ type: 'updateBoard', board: this.board })\n            this.$notify({\n                message: 'Task removed',\n                position: 'bottom-left',\n                duration: 2000,\n            })\n            this.$emit('forceRender')\n        },\n        updateTask(newTask, activity) {\n            if (activity) {\n                this.board.activities.unshift(activity)\n            }\n            const group = this.getGroupById()\n            const taskIdx = group.tasks.findIndex(\n                (task) => task.id === newTask.id\n            )\n            group.tasks.splice(taskIdx, 1, newTask)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            this.$store.dispatch({ type: 'updateBoard', board: this.board })\n\n            this.$emit('forceRender')\n        },\n        updateTasks() {\n            const group = this.getGroupById()\n            group.tasks = this.clonedTasks\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            this.$store.dispatch({ type: 'updateBoard', board: this.board })\n\n            this.$emit('forceRender')\n        },\n    },\n    created() {\n        this.clonedTasks = JSON.parse(JSON.stringify(this.tasks))\n    },\n    components: {\n        taskPreview,\n        draggable,\n    },\n}\n</script>\n"]}]}