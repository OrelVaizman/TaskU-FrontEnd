{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/notifications-modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/cmps/notifications-modal.vue","mtime":1607418824548},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBub3RpZnNGaWx0ZXJzIGZyb20gJy4vbm90aWZzLWZpbHRlcnMnCmltcG9ydCBub3RpZlByZXZpZXcgZnJvbSAnLi9ub3RpZi1wcmV2aWV3JwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIG5vdGlmc0ZpbHRlcnMsCiAgICBub3RpZlByZXZpZXcKICB9LAogIHByb3BzOiB7CiAgICBpc0V4cGFuZGVkOiBCb29sZWFuCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyQnk6IG51bGwsCiAgICAgIG5vdGlmc0NvcHk6IG51bGwKICAgICAgLy8gZXhwYW5kZWQ6IG51bGwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBib2FyZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuYm9hcmQKICAgIH0sCiAgICBub3RpZnNUb1Nob3coKSB7CiAgICAgIGxldCBub3RpZnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXIubm90aWZpY2F0aW9ucwogICAgICBzd2l0Y2ggKHRoaXMuZmlsdGVyQnkpIHsKICAgICAgICBjYXNlICd1bnJlYWQnOgogICAgICAgICAgbm90aWZzID0gbm90aWZzLmZpbHRlcihub3RpZiA9PiBub3RpZi5pc1JlYWQgPT09IGZhbHNlKQogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlICdhc3NpZ25lZCc6CiAgICAgICAgICBub3RpZnMgPSBub3RpZnMuZmlsdGVyKG5vdGlmID0+IG5vdGlmLnR5cGUgPT09ICdhc3NpZ25lZCcpCiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ21lbnRpb25zJzoKICAgICAgICAgIG5vdGlmcyA9IFtdCiAgICAgICAgICBicmVhawogICAgICB9CiAgICAgIHJldHVybiBub3RpZnMKICAgIH0sCiAgICB1c2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVOb3RpZihub3RpZikgewogICAgICBjb25zdCBpZHggPSB0aGlzLm5vdGlmc0NvcHkuZmluZEluZGV4KAogICAgICAgIGN1cnJOb3RpZiA9PiBjdXJyTm90aWYuaWQgPT09IG5vdGlmLmlkCiAgICAgICkKICAgICAgdGhpcy5ub3RpZnNDb3B5LnNwbGljZShpZHgsIDEsIG5vdGlmKQogICAgfSwKICAgIGRlbGV0ZU5vdGlmKG5vdGlmKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMubm90aWZzQ29weS5maW5kSW5kZXgoCiAgICAgICAgY3Vyck5vdGlmID0+IGN1cnJOb3RpZi5pZCA9PT0gbm90aWYuaWQKICAgICAgKQogICAgICB0aGlzLm5vdGlmc0NvcHkuc3BsaWNlKGlkeCwgMSkKICAgICAgdGhpcy51cGRhdGVOb3RpZnMoKQogICAgfSwKICAgIHNldEZpbHRlcihmaWx0ZXJTdHIpIHsKICAgICAgdGhpcy5maWx0ZXJCeSA9IGZpbHRlclN0cgogICAgICB0aGlzLnVwZGF0ZU5vdGlmcygpCiAgICB9LAogICAgdXBkYXRlTm90aWZzKCkgewogICAgICB0aGlzLnVzZXIubm90aWZpY2F0aW9ucyA9IHRoaXMubm90aWZzQ29weQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgdHlwZTogJ3VwZGF0ZVVzZXInLAogICAgICAgIHVzZXI6IHRoaXMudXNlcgogICAgICB9KQogICAgfQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgdGhpcy51cGRhdGVOb3RpZnMoKQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubm90aWZzQ29weSA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlci5ub3RpZmljYXRpb25zCiAgfQp9Cg=="},{"version":3,"sources":["notifications-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notifications-modal.vue","sourceRoot":"src/cmps","sourcesContent":["<template>\n  <section :class=\"{ 'notifications-modal': true, 'expanded': isExpanded }\">\n    <!-- <section class=\"notifications-modal\"> -->\n    <header class=\"header-notifs\">\n      <h3 class=\"notifs-title\">Notifications</h3>\n      <notifs-filters :setFilter=\"setFilter\"></notifs-filters>\n    </header>\n    <ul v-if=\"notifsToShow.length\" class=\"notifs-list flex column\">\n      <notif-preview\n        v-for=\"notif in notifsToShow\"\n        :key=\"notif.id\"\n        :notif=\"notif\"\n        :user=\"user\"\n        :board=\"board\"\n        @updateNotif=\"updateNotif\"\n        @deleteNotif=\"deleteNotif\"\n      />\n    </ul>\n  </section>\n</template>\n\n<script>\nimport notifsFilters from './notifs-filters'\nimport notifPreview from './notif-preview'\n\nexport default {\n  components: {\n    notifsFilters,\n    notifPreview\n  },\n  props: {\n    isExpanded: Boolean\n  },\n  data() {\n    return {\n      filterBy: null,\n      notifsCopy: null\n      // expanded: null\n    }\n  },\n  computed: {\n    board() {\n      return this.$store.getters.board\n    },\n    notifsToShow() {\n      let notifs = this.$store.getters.user.notifications\n      switch (this.filterBy) {\n        case 'unread':\n          notifs = notifs.filter(notif => notif.isRead === false)\n          break\n        case 'assigned':\n          notifs = notifs.filter(notif => notif.type === 'assigned')\n          break\n        case 'mentions':\n          notifs = []\n          break\n      }\n      return notifs\n    },\n    user() {\n      return this.$store.getters.user\n    }\n  },\n  methods: {\n    updateNotif(notif) {\n      const idx = this.notifsCopy.findIndex(\n        currNotif => currNotif.id === notif.id\n      )\n      this.notifsCopy.splice(idx, 1, notif)\n    },\n    deleteNotif(notif) {\n      const idx = this.notifsCopy.findIndex(\n        currNotif => currNotif.id === notif.id\n      )\n      this.notifsCopy.splice(idx, 1)\n      this.updateNotifs()\n    },\n    setFilter(filterStr) {\n      this.filterBy = filterStr\n      this.updateNotifs()\n    },\n    updateNotifs() {\n      this.user.notifications = this.notifsCopy\n      this.$store.dispatch({\n        type: 'updateUser',\n        user: this.user\n      })\n    }\n  },\n  destroyed() {\n    this.updateNotifs()\n  },\n  created() {\n    this.notifsCopy = this.$store.getters.user.notifications\n  }\n}\n</script>\n\n<style></style>\n"]}]}