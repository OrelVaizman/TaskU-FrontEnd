{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/task-details.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/task-details.vue","mtime":1606651137196},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YXNrUG9zdHMgZnJvbSAnQC9jbXBzL3Rhc2stcG9zdHMnCmltcG9ydCB0YXNrQWN0aXZpdGllcyBmcm9tICdAL2NtcHMvdGFzay1hY3Rpdml0aWVzJwppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gJ0Avc2VydmljZXMvZXZlbnQtYnVzLnNlcnZpY2UnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICd0YXNrLWRldGFpbHMnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0YXNrOiBudWxsLAogICAgICAgICAgICBncm91cElkOiBudWxsLAogICAgICAgICAgICBjb21wb25lbnRLZXk6IDAsCiAgICAgICAgICAgIG5ld1Bvc3Q6IG51bGwsCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgY29uc3QgdGFza0luZm8gPSB0aGlzLmdldFRhc2tJbmZvQnlJZCgpCiAgICAgICAgdGhpcy50YXNrID0gdGFza0luZm8udGFzawogICAgICAgIHRoaXMuZ3JvdXBJZCA9IHRhc2tJbmZvLmdyb3VwSWQKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY2xvc2VCdG4oKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJykKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9ib2FyZC8ke3RoaXMuJHJvdXRlLnBhcmFtcy5ib2FyZElkfWApCiAgICAgICAgfSwKICAgICAgICBnZXRUYXNrc1BhdGgoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdncm91cElkJywgdGhpcy5ncm91cElkKQogICAgICAgICAgICBjb25zdCBncm91cElkeCA9IHRoaXMuYm9hcmQuZ3JvdXBzLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgIChncm91cCkgPT4gZ3JvdXAuaWQgPT09IHRoaXMuZ3JvdXBJZAogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy5ib2FyZC5ncm91cHNbZ3JvdXBJZHhdLnRhc2tzCiAgICAgICAgICAgIHJldHVybiB0YXNrcwogICAgICAgIH0sCiAgICAgICAgdXBkYXRlVGFza1R4dChldikgewogICAgICAgICAgICB0aGlzLnRhc2sudHh0ID0gZXYudGFyZ2V0LmlubmVyVGV4dAogICAgICAgICAgICBjb25zdCB0YXNrcyA9IHRoaXMuZ2V0VGFza3NQYXRoKCkKICAgICAgICAgICAgY29uc3QgdGFza0lkeCA9IHRhc2tzLmZpbmRJbmRleCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGhpcy50YXNrLmlkKQogICAgICAgICAgICB0YXNrcy5zcGxpY2UodGFza0lkeCwgMSwgdGhpcy50YXNrKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZUJvYXJkJywKICAgICAgICAgICAgICAgIGJvYXJkOiB0aGlzLmJvYXJkLAogICAgICAgICAgICB9KQogICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgndXBkYXRlVGFza1ByZXZpZXcnLCB0aGlzLnRhc2spCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVQb3N0cyhwb3N0cykgewogICAgICAgICAgICBjb25zdCB0YXNrcyA9IHRoaXMuZ2V0VGFza3NQYXRoKCkKICAgICAgICAgICAgY29uc3QgdGFza0lkeCA9IHRhc2tzLmZpbmRJbmRleCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGhpcy50YXNrLmlkKQogICAgICAgICAgICB0YXNrc1t0YXNrSWR4XS5wb3N0cyA9IHBvc3RzCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzYXZlQm9hcmQnLAogICAgICAgICAgICAgICAgYm9hcmQ6IHRoaXMuYm9hcmQsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCd1cGRhdGVUYXNrUHJldmlldycsIHRoaXMudGFzaykKICAgICAgICB9LAogICAgICAgIGdldFRhc2tJbmZvQnlJZCgpIHsKICAgICAgICAgICAgbGV0IHRhc2tJbmZvID0ge30KICAgICAgICAgICAgY29uc3QgdGFza0lkID0gdGhpcy4kcm91dGUucGFyYW1zLnRhc2tJZAogICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuYm9hcmQuZ3JvdXBzLmZpbmQoKGdyb3VwKSA9PgogICAgICAgICAgICAgICAgZ3JvdXAudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGFza0lkKQogICAgICAgICAgICApCiAgICAgICAgICAgIHRhc2tJbmZvLnRhc2sgPSBncm91cC50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSB0YXNrSWQpCiAgICAgICAgICAgIHRhc2tJbmZvLmdyb3VwSWQgPSBncm91cC5pZAogICAgICAgICAgICByZXR1cm4gdGFza0luZm8KICAgICAgICB9LAogICAgICAgIGZvcmNlUmVyZW5kZXIoKSB7CiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50S2V5ICs9IDEKICAgICAgICB9LAogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgYm9hcmQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmJvYXJkCiAgICAgICAgfSwKICAgICAgICBsb2dnZWRJblVzZXIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmxvZ2dlZEluVXNlcgogICAgICAgIH0sCiAgICAgICAgcG9zdHMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhc2sucG9zdHMKICAgICAgICB9LAogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgJyRyb3V0ZS5wYXJhbXMudGFza0lkJygpIHsKICAgICAgICAgICAgY29uc3QgdGFza0luZm8gPSB0aGlzLmdldFRhc2tJbmZvQnlJZCgpCiAgICAgICAgICAgIHRoaXMuZ3JvdXBJZCA9IHRhc2tJbmZvLmdyb3VwSWQKICAgICAgICAgICAgdGhpcy50YXNrID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0YXNrSW5mby50YXNrKSkKICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rhc2snLCB0aGlzLnRhc2spCiAgICAgICAgfSwKICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgdGFza1Bvc3RzLAogICAgICAgIHRhc2tBY3Rpdml0aWVzLAogICAgfSwKfQo="},{"version":3,"sources":["task-details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"task-details.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <section v-if=\"task\" class=\"task-details-section\">\n        <div class=\"top-bar\">\n            <i @click.stop=\"closeBtn\" class=\"fas fa-times\"></i>\n            <h1\n                @blur.stop=\"updateTaskTxt\"\n                @keyup.enter=\"updateTaskTxt\"\n                contenteditable\n            >\n                {{ task.txt }}\n            </h1>\n        </div>\n        <el-tabs>\n            <el-tab-pane label=\"Task posts\">\n                <task-posts @updatePosts=\"updatePosts\" :posts=\"posts\" />\n            </el-tab-pane>\n            <el-tab-pane label=\"Task activities\">\n                <task-activities :activities=\"task.activities\" />\n            </el-tab-pane>\n        </el-tabs>\n    </section>\n</template>\n<script>\nimport taskPosts from '@/cmps/task-posts'\nimport taskActivities from '@/cmps/task-activities'\nimport { eventBus } from '@/services/event-bus.service'\nexport default {\n    name: 'task-details',\n    data() {\n        return {\n            task: null,\n            groupId: null,\n            componentKey: 0,\n            newPost: null,\n        }\n    },\n    created() {\n        const taskInfo = this.getTaskInfoById()\n        this.task = taskInfo.task\n        this.groupId = taskInfo.groupId\n    },\n    methods: {\n        closeBtn() {\n            this.$emit('close')\n            this.$router.push(`/board/${this.$route.params.boardId}`)\n        },\n        getTasksPath() {\n            console.log('groupId', this.groupId)\n            const groupIdx = this.board.groups.findIndex(\n                (group) => group.id === this.groupId\n            )\n            const tasks = this.board.groups[groupIdx].tasks\n            return tasks\n        },\n        updateTaskTxt(ev) {\n            this.task.txt = ev.target.innerText\n            const tasks = this.getTasksPath()\n            const taskIdx = tasks.findIndex((task) => task.id === this.task.id)\n            tasks.splice(taskIdx, 1, this.task)\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            eventBus.$emit('updateTaskPreview', this.task)\n        },\n        updatePosts(posts) {\n            const tasks = this.getTasksPath()\n            const taskIdx = tasks.findIndex((task) => task.id === this.task.id)\n            tasks[taskIdx].posts = posts\n            this.$store.dispatch({\n                type: 'saveBoard',\n                board: this.board,\n            })\n            eventBus.$emit('updateTaskPreview', this.task)\n        },\n        getTaskInfoById() {\n            let taskInfo = {}\n            const taskId = this.$route.params.taskId\n            const group = this.board.groups.find((group) =>\n                group.tasks.find((task) => task.id === taskId)\n            )\n            taskInfo.task = group.tasks.find((task) => task.id === taskId)\n            taskInfo.groupId = group.id\n            return taskInfo\n        },\n        forceRerender() {\n            this.componentKey += 1\n        },\n    },\n    computed: {\n        board() {\n            return this.$store.getters.board\n        },\n        loggedInUser() {\n            return this.$store.getters.loggedInUser\n        },\n        posts() {\n            return this.task.posts\n        },\n    },\n    watch: {\n        '$route.params.taskId'() {\n            const taskInfo = this.getTaskInfoById()\n            this.groupId = taskInfo.groupId\n            this.task = JSON.parse(JSON.stringify(taskInfo.task))\n            console.log('task', this.task)\n        },\n    },\n    components: {\n        taskPosts,\n        taskActivities,\n    },\n}\n</script>\n"]}]}