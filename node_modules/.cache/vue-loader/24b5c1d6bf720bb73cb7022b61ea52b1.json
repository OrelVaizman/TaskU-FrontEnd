{"remainingRequest":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/app-login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/src/views/app-login.vue","mtime":1607213862000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/orelvaizman/Desktop/dev/FinalSprint/tasku-frontend/TaskU-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBnb29nbGVMb2dpbiBmcm9tICd2dWUtZ29vZ2xlLWxvZ2luJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhcHAtbG9naW4nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkNyZWRlbnRpYWxzOiB7CiAgICAgICAgZW1haWw6IG51bGwsCiAgICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIH0sCiAgICAgIGlzRWxlbWVudERpc2FibGVkOiBmYWxzZSwKICAgICAgZ29vZ2xlU2lnbkluUGFyYW1zOiB7CiAgICAgICAgY2xpZW50SWQ6CiAgICAgICAgICAnMzYyMTc0NjI4MDk3LWFsdDZ0b25qYWtpcTQwcGNtNmk5cm5vMjg5OTdyZ2ZoLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tJywKICAgICAgfSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBkZWZhdWx0Qm9hcmRJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZGVmYXVsdEJvYXJkSWQKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgYXN5bmMgc3VibWl0TG9naW4oKSB7CiAgICAgIGNvbnN0IHVzZXJDcmVkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmxvZ2luQ3JlZGVudGlhbHMpKQogICAgICB0cnkgewogICAgICAgIGxldCB1c2VyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogJ2xvZ2luJywKICAgICAgICAgIHVzZXJDcmVkLAogICAgICAgIH0pCiAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgIHRoaXMuaXNFbGVtZW50RGlzYWJsZWQgPSB0cnVlCiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCh7IHR5cGU6ICdsb2FkQm9hcmRzJyB9KQogICAgICAgICAgY29uc29sZS5sb2coJ3VzZXIgYWZ0ZXIgbG9naW46JywgdXNlcikKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG9mZnNldDogMzM1LAogICAgICAgICAgICBtZXNzYWdlOiAiWW91J3ZlIHN1Y2Vzc2Z1bGx5IGxvZ2dlZCBpbiEiLAogICAgICAgICAgfSkKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL2JvYXJkLyR7dGhpcy5kZWZhdWx0Qm9hcmRJZH1gKQogICAgICAgICAgfSwgMjAwMCkKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBkdXJ0aW9uOiAyMDAwLAogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG9mZnNldDogMzM1LAogICAgICAgICAgICBtZXNzYWdlOiAnSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkLicsCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxvZ2luQ3JlZGVudGlhbHMgPSB7CiAgICAgICAgZW1haWw6IG51bGwsCiAgICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgICAgaXNBZG1pbjogZmFsc2UsCiAgICAgIH0KICAgIH0sCiAgICAvLyBvbkdvb2dsZVN1Y2Nlc3Mob2JqKSB7CiAgICAvLyAgICAgY29uc29sZS5sb2cob2JqKQogICAgLy8gfSwKICAgIC8vIG9uR29vZ2xlRmFpbHVyZShnb29nbGVVc2VyKSB7CiAgICAvLyAgICAgZ29vZ2xlVXNlci5nZXRCYXNpY1Byb2ZpbGUoKQogICAgLy8gfSwKICB9LAogIC8vIGNvbXBvbmVudHM6IHsKICAvLyAgICAgZ29vZ2xlTG9naW4sCiAgLy8gfSwKfQo="},{"version":3,"sources":["app-login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app-login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section class=\"app-login-container\">\n    <div class=\"login-header\">\n      <router-link to=\"/\"\n        ><img class=\"logo2 flex end\" src=\"@/assets/imgs/logo2.png\" alt=\"\"\n      /></router-link>\n    </div>\n    <section class=\"app-login flex column\">\n      <div class=\"flex column justify-center\">\n        <h2 class=\"login-title\">Log <span class=\"thin-fonted\">In</span></h2>\n        <form\n          class=\"flex column justify-center align-center\"\n          @submit.prevent=\"submitLogin\"\n        >\n          <el-input\n            type=\"text\"\n            v-model=\"loginCredentials.email\"\n            placeholder=\"Email\"\n            :disabled=\"isElementDisabled\"\n          />\n\n          <el-input\n            type=\"password\"\n            v-model=\"loginCredentials.password\"\n            placeholder=\"Password\"\n            :disabled=\"isElementDisabled\"\n          />\n\n          <button class=\"login-btn\" :disabled=\"isElementDisabled\">Login</button>\n        </form>\n        <div class=\"social-login flex align-center\">\n          <span class=\"separator-line\"></span>\n          <div class=\"login-subtitle flex align-center justify-center\">\n            Or Sign-in with\n          </div>\n          <span class=\"separator-line\"></span>\n        </div>\n        <div class=\"social-logos flex space-between\">\n          <div class=\"social-option\">\n            <img src=\"@/assets/imgs/logo_google.png\" />\n            Google\n          </div>\n          <div class=\"social-option\">\n            <img src=\"@/assets/imgs/facebook_logo.png\" />\n            Facebook\n          </div>\n        </div>\n        <div class=\"signup-section flex align-center\">\n          <span class=\"separator-line\"></span>\n          <div class=\"login-subtitle flex align-center justify-center\">\n            Don't have a user yet?\n\n            <router-link to=\"/signup\">\n              <span class=\"btn-content\"> Signup</span>\n            </router-link>\n          </div>\n          <span class=\"separator-line\"></span>\n        </div>\n        <!-- <googleLogin\n                    :params=\"googleSignInParams\"\n                    :onSuccess=\"onGoogleSuccess\"\n                    :onFailure=\"onGoogleFailure\"\n                    >Login</googleLogin\n                > -->\n      </div>\n    </section>\n  </section>\n</template>\n\n<script>\n// import googleLogin from 'vue-google-login'\n\nexport default {\n  name: 'app-login',\n  data() {\n    return {\n      loginCredentials: {\n        email: null,\n        password: null,\n        isAdmin: false,\n      },\n      isElementDisabled: false,\n      googleSignInParams: {\n        clientId:\n          '362174628097-alt6tonjakiq40pcm6i9rno28997rgfh.apps.googleusercontent.com',\n      },\n    }\n  },\n  computed: {\n    defaultBoardId() {\n      return this.$store.getters.defaultBoardId\n    },\n  },\n  created() {},\n  methods: {\n    async submitLogin() {\n      const userCred = JSON.parse(JSON.stringify(this.loginCredentials))\n      try {\n        let user = await this.$store.dispatch({\n          type: 'login',\n          userCred,\n        })\n        if (user) {\n          this.isElementDisabled = true\n          await this.$store.dispatch({ type: 'loadBoards' })\n          console.log('user after login:', user)\n          this.$message({\n            duration: 2000,\n            showClose: true,\n            type: 'success',\n            offset: 335,\n            message: \"You've sucessfully logged in!\",\n          })\n          setTimeout(() => {\n            this.$router.push(`/board/${this.defaultBoardId}`)\n          }, 2000)\n        }\n      } catch (err) {\n        if (err.response.status === 401) {\n          this.$message({\n            durtion: 2000,\n            showClose: true,\n            type: 'error',\n            offset: 335,\n            message: 'Incorrect email or password.',\n          })\n        }\n      }\n      this.loginCredentials = {\n        email: null,\n        password: null,\n        isAdmin: false,\n      }\n    },\n    // onGoogleSuccess(obj) {\n    //     console.log(obj)\n    // },\n    // onGoogleFailure(googleUser) {\n    //     googleUser.getBasicProfile()\n    // },\n  },\n  // components: {\n  //     googleLogin,\n  // },\n}\n</script>\n"]}]}